-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  E:\anna\ethnicity-covid-research/output/log/05a_eth_table1_descrip
> tives_eth16.log
  log type:  text
 opened on:   4 Sep 2020, 04:33:48

. 
. * Open Stata dataset
. use $Tempdir/analysis_dataset, clear

. safetab eth16,m 

     Eth 16 |
  collapsed |      Freq.     Percent        Cum.
------------+-----------------------------------
    British |  9,594,647       54.82       54.82
      Irish |     79,363        0.45       55.27
Other White |  1,351,071        7.72       62.99
     Indian |    435,953        2.49       65.48
  Pakistani |    302,824        1.73       67.21
Bangladeshi |     70,229        0.40       67.61
Other Asian |    224,133        1.28       68.89
  Caribbean |     83,197        0.48       69.37
    African |    192,234        1.10       70.47
Other Black |     68,862        0.39       70.86
    Chinese |    105,458        0.60       71.46
  All mixed |    172,310        0.98       72.45
      Other |    219,118        1.25       73.70
    Unknown |  4,603,658       26.30      100.00
------------+-----------------------------------
      Total | 17,503,057      100.00

. 
.  /* PROGRAMS TO AUTOMATE TABULATIONS=========================================
> ==*/ 
. 
. *****************************************************************************
> ***
. * All below code from K Baskharan 
. * Generic code to output one row of table
. 
. cap prog drop generaterow

. program define generaterow
  1. syntax, variable(varname) condition(string) 
  2.         
.         cou
  3.         local overalldenom=r(N)
  4.         
.         sum `variable' if `variable' `condition'
  5.         file write tablecontent (r(max)) _tab
  6.         
.         cou if `variable' `condition'
  7.         local rowdenom = r(N)
  8.         local colpct = 100*(r(N)/`overalldenom')
  9.         file write tablecontent %9.0gc (`rowdenom')  (" (") %3.1f (`colpct
> ') (")") _tab
 10. 
.         forvalues i=1/14{
 11.         cou if eth16 == `i'
 12.         local rowdenom = r(N)
 13.         cou if eth16 == `i' & `variable' `condition'
 14.         local pct = 100*(r(N)/`rowdenom') 
 15.         file write tablecontent %9.0gc (r(N)) (" (") %3.1f (`pct') (")") _
> tab
 16.         }
 17.         
.         file write tablecontent _n
 18. end

. 
. 
. * Output one row of table for co-morbidities and meds
. 
. cap prog drop generaterow2

. program define generaterow2
  1. syntax, variable(varname) condition(string) 
  2.         
.         cou
  3.         local overalldenom=r(N)
  4.         
.         cou if `variable' `condition'
  5.         local rowdenom = r(N)
  6.         local colpct = 100*(r(N)/`overalldenom')
  7.         file write tablecontent %9.0gc (`rowdenom')  (" (") %3.1f (`colpct
> ') (")") _tab
  8. 
.         forvalues i=1/14{
  9.         cou if eth16 == `i'
 10.         local rowdenom = r(N)
 11.         cou if eth16 == `i' & `variable' `condition'
 12.         local pct = 100*(r(N)/`rowdenom') 
 13.         file write tablecontent %9.0gc (r(N)) (" (") %3.1f (`pct') (")") _
> tab
 14.         }
 15.         
.         file write tablecontent _n
 16. end

. 
. 
. 
. /* Explanatory Notes 
> 
> defines a program (SAS macro/R function equivalent), generate row
> the syntax row specifies two inputs for the program: 
> 
>         a VARNAME which is your variable 
>         a CONDITION which is a string of some condition you impose 
>         
> the program counts if variable and condition and returns the counts
> column percentages are then automatically generated
> this is then written to the text file 'tablecontent' 
> the number followed by space, brackets, formatted pct, end bracket and then t
> ab
> 
> the format %3.1f specifies length of 3, followed by 1 dp. 
> 
> */ 
. 
. *****************************************************************************
> ***
. * Generic code to output one section (varible) within table (calls above)
. 
. cap prog drop tabulatevariable

. prog define tabulatevariable
  1. syntax, variable(varname) min(real) max(real) [missing]
  2. 
.         local lab: variable label `variable'
  3.         file write tablecontent ("`lab'") _n 
  4. 
.         forvalues varlevel = `min'/`max'{ 
  5.                 generaterow, variable(`variable') condition("==`varlevel'"
> )
  6.         }
  7.         
.         if "`missing'"!="" generaterow, variable(`variable') condition("== 12
> ")
  8.         
. 
. 
. end

. 
. *****************************************************************************
> ***
. 
. /* Explanatory Notes 
> 
> defines program tabulate variable 
> syntax is : 
> 
>         - a VARNAME which you stick in variable 
>         - a numeric minimum 
>         - a numeric maximum 
>         - optional missing option, default value is . 
> 
> forvalues lowest to highest of the variable, manually set for each var
> run the generate row program for the level of the variable 
> if there is a missing specified, then run the generate row for missing vals
> 
> */ 
. 
. *****************************************************************************
> ***
. * Generic code to qui summarize a continous variable 
. 
. cap prog drop summarizevariable 

. prog define summarizevariable
  1. syntax, variable(varname) 
  2. 
.         local lab: variable label `variable'
  3.         file write tablecontent ("`lab'") _n 
  4. 
. 
.         qui summarize `variable', d
  5.         file write tablecontent ("Mean (SD)") _tab 
  6.         file write tablecontent  %3.1f (r(mean)) (" (") %3.1f (r(sd)) (")"
> ) _tab
  7.         
.         forvalues i=1/14{                                                    
>    
  8.         qui summarize `variable' if eth16 == `i', d
  9.         file write tablecontent  %3.1f (r(mean)) (" (") %3.1f (r(sd)) (")"
> ) _tab
 10.         }
 11. 
. file write tablecontent _n
 12. 
.         
.         qui summarize `variable', d
 13.         file write tablecontent ("Median (IQR)") _tab 
 14.         file write tablecontent %3.1f (r(p50)) (" (") %3.1f (r(p25)) ("-")
>  %3.1f (r(p75)) (")") _tab
 15.         
.         forvalues i=1/14{
 16.         qui summarize `variable' if eth16 == `i', d
 17.         file write tablecontent %3.1f (r(p50)) (" (") %3.1f (r(p25)) ("-")
>  %3.1f (r(p75)) (")") _tab
 18.         }
 19.         
. file write tablecontent _n
 20.         
. end

. 
. /* INVOKE PROGRAMS FOR TABLE 1===============================================
> =*/ 
. 
. *Set up output file
. cap file close tablecontent

. file open tablecontent using $Tabfigdir/table1_eth16.txt, write text replace
(note: file E:\anna\ethnicity-covid-research/output/tabfig/table1_eth16.txt not
>  found)

. 
. file write tablecontent ("Table 1: Demographic and Clinical Characteristics")
>  _n

. 
. * eth16 labelled columns
. 
. local lab1: label eth16 1

. local lab2: label eth16 2

. local lab3: label eth16 3

. local lab4: label eth16 4

. local lab5: label eth16 5

. local lab6: label eth16 6

. local lab7: label eth16 7

. local lab8: label eth16 8

. local lab9: label eth16 9

. local lab10: label eth16 10

. local lab11: label eth16 11

. local lab12: label eth16 12

. local lab13: label eth16 13

. local lab14: label eth16 14

. 
. 
. 
. file write tablecontent _tab ("Total")                                       
>              _tab ///
>                                                          ("`lab1'")          
>                                      _tab ///
>                                                          ("`lab2'")          
>                                      _tab ///
>                                                          ("`lab3'")          
>                                      _tab ///
>                                                          ("`lab4'")          
>                                      _tab ///
>                                                          ("`lab5'")          
>                                      _tab ///
>                                                          ("`lab6'")          
>                                      _tab ///
>                                                          ("`lab7'")          
>                                      _tab ///
>                                                          ("`lab8'")          
>                                      _tab ///
>                                                          ("`lab9'")          
>                                      _tab ///
>                                                          ("`lab10'")         
>                                      _tab ///
>                                                          ("`lab11'")         
>                                      _tab ///
>                                                          ("`lab12'")         
>                                      _tab ///
>                                                          ("`lab13'")         
>                                      _tab ///
>                                                          ("`lab14'")         
>                                      _n 

.                                                          
.                                                          
. 
. 
. * DEMOGRAPHICS (more than one level, potentially missing) 
. 
. format hba1c_pct bmi egfr %9.2f

. 
. 
. gen byte cons=1

. tabulatevariable, variable(cons) min(1) max(1) 
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        cons | 17,503,057           1           0          1          1
  17,503,057
  9,594,647
  9,594,647
  79,363
  79,363
  1,351,071
  1,351,071
  435,953
  435,953
  302,824
  302,824
  70,229
  70,229
  224,133
  224,133
  83,197
  83,197
  192,234
  192,234
  68,862
  68,862
  105,458
  105,458
  172,310
  172,310
  219,118
  219,118
  4,603,658
  4,603,658

. file write tablecontent _n 

. 
. qui summarizevariable, variable(age) 

. file write tablecontent _n

. 
. tabulatevariable, variable(agegroup) min(1) max(7) 
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  2,999,748           1           0          1          1
  2,999,748
  9,594,647
  1,258,535
  79,363
  8,483
  1,351,071
  268,545
  435,953
  68,260
  302,824
  68,876
  70,229
  16,680
  224,133
  45,928
  83,197
  11,477
  192,234
  41,826
  68,862
  15,737
  105,458
  42,028
  172,310
  48,445
  219,118
  48,419
  4,603,658
  1,056,509
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  3,013,553           2           0          2          2
  3,013,553
  9,594,647
  1,427,806
  79,363
  13,428
  1,351,071
  410,911
  435,953
  122,640
  302,824
  85,818
  70,229
  20,828
  224,133
  60,498
  83,197
  12,870
  192,234
  47,715
  68,862
  14,830
  105,458
  24,336
  172,310
  45,785
  219,118
  62,377
  4,603,658
  663,711
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  2,887,454           3           0          3          3
  2,887,454
  9,594,647
  1,523,943
  79,363
  12,581
  1,351,071
  282,696
  435,953
  98,448
  302,824
  70,791
  70,229
  18,354
  224,133
  55,884
  83,197
  13,778
  192,234
  52,760
  68,862
  15,933
  105,458
  16,642
  172,310
  35,223
  219,118
  52,241
  4,603,658
  638,180
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  3,083,245           4           0          4          4
  3,083,245
  9,594,647
  1,851,961
  79,363
  13,074
  1,351,071
  173,089
  435,953
  61,097
  302,824
  36,624
  70,229
  7,790
  224,133
  31,682
  83,197
  20,654
  192,234
  32,174
  68,862
  14,385
  105,458
  10,845
  172,310
  24,392
  219,118
  29,144
  4,603,658
  776,334
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  2,417,806           5           0          5          5
  2,417,806
  9,594,647
  1,538,336
  79,363
  11,930
  1,351,071
  107,922
  435,953
  47,888
  302,824
  24,386
  70,229
  3,905
  224,133
  17,585
  83,197
  11,540
  192,234
  11,588
  68,862
  5,042
  105,458
  7,199
  172,310
  10,960
  219,118
  15,389
  4,603,658
  604,136
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  1,958,842           6           0          6          6
  1,958,842
  9,594,647
  1,304,492
  79,363
  12,325
  1,351,071
  70,107
  435,953
  24,803
  302,824
  9,472
  70,229
  1,518
  224,133
  8,869
  83,197
  6,272
  192,234
  4,433
  68,862
  1,905
  105,458
  3,016
  172,310
  4,983
  219,118
  7,897
  4,603,658
  498,750
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    agegroup |  1,142,409           7           0          7          7
  1,142,409
  9,594,647
  689,574
  79,363
  7,542
  1,351,071
  37,801
  435,953
  12,817
  302,824
  6,857
  70,229
  1,154
  224,133
  3,687
  83,197
  6,606
  192,234
  1,738
  68,862
  1,030
  105,458
  1,392
  172,310
  2,522
  219,118
  3,651
  4,603,658
  366,038

. file write tablecontent _n 

. 
. tabulatevariable, variable(male) min(0) max(1) 
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        male |  8,769,190           0           0          0          0
  8,769,190
  9,594,647
  5,011,787
  79,363
  40,111
  1,351,071
  689,075
  435,953
  205,292
  302,824
  145,725
  70,229
  32,945
  224,133
  110,912
  83,197
  43,592
  192,234
  93,749
  68,862
  34,408
  105,458
  55,211
  172,310
  88,682
  219,118
  104,803
  4,603,658
  2,112,898
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        male |  8,733,867           1           0          1          1
  8,733,867
  9,594,647
  4,582,860
  79,363
  39,252
  1,351,071
  661,996
  435,953
  230,661
  302,824
  157,099
  70,229
  37,284
  224,133
  113,221
  83,197
  39,605
  192,234
  98,485
  68,862
  34,454
  105,458
  50,247
  172,310
  83,628
  219,118
  114,315
  4,603,658
  2,490,760

. file write tablecontent _n 

. 
. qui summarizevariable, variable(gp_consult_count) 

. file write tablecontent _n 

. 
. tabulatevariable, variable(imd) min(1) max(5) 
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         imd |  3,511,230           1           0          1          1
  3,511,230
  9,594,647
  2,119,434
  79,363
  14,581
  1,351,071
  170,730
  435,953
  49,290
  302,824
  12,190
  70,229
  3,238
  224,133
  23,546
  83,197
  5,131
  192,234
  12,598
  68,862
  5,068
  105,458
  19,854
  172,310
  22,310
  219,118
  23,427
  4,603,658
  1,029,833
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         imd |  3,497,284           2           0          2          2
  3,497,284
  9,594,647
  2,046,136
  79,363
  16,839
  1,351,071
  239,373
  435,953
  58,552
  302,824
  18,890
  70,229
  5,002
  224,133
  32,288
  83,197
  8,446
  192,234
  18,904
  68,862
  7,344
  105,458
  22,274
  172,310
  27,284
  219,118
  32,423
  4,603,658
  963,529
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         imd |  3,503,769           3           0          3          3
  3,503,769
  9,594,647
  1,943,621
  79,363
  16,993
  1,351,071
  271,085
  435,953
  95,185
  302,824
  36,439
  70,229
  10,284
  224,133
  47,660
  83,197
  14,308
  192,234
  29,806
  68,862
  10,754
  105,458
  21,630
  172,310
  32,301
  219,118
  39,333
  4,603,658
  934,370
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         imd |  3,497,684           4           0          4          4
  3,497,684
  9,594,647
  1,774,195
  79,363
  16,630
  1,351,071
  333,362
  435,953
  142,001
  302,824
  73,044
  70,229
  18,281
  224,133
  61,900
  83,197
  21,780
  192,234
  50,738
  68,862
  18,434
  105,458
  24,197
  172,310
  40,562
  219,118
  55,517
  4,603,658
  867,043
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         imd |  3,349,864           5           0          5          5
  3,349,864
  9,594,647
  1,625,691
  79,363
  13,692
  1,351,071
  325,462
  435,953
  86,422
  302,824
  160,910
  70,229
  33,000
  224,133
  56,633
  83,197
  32,951
  192,234
  78,030
  68,862
  26,614
  105,458
  16,018
  172,310
  48,015
  219,118
  66,342
  4,603,658
  780,084

. file write tablecontent _n 

. 
. tabulatevariable, variable(hh_total_cat) min(1) max(4) missing
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hh_total_cat |  7,614,823           1           0          1          1
  7,614,823
  9,594,647
  4,690,683
  79,363
  41,217
  1,351,071
  494,498
  435,953
  98,841
  302,824
  42,849
  70,229
  9,449
  224,133
  61,491
  83,197
  38,655
  192,234
  56,814
  68,862
  23,979
  105,458
  46,944
  172,310
  63,275
  219,118
  73,631
  4,603,658
  1,872,497
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hh_total_cat |  6,223,399           2           0          2          2
  6,223,399
  9,594,647
  3,252,349
  79,363
  24,073
  1,351,071
  523,733
  435,953
  198,089
  302,824
  113,955
  70,229
  29,298
  224,133
  93,804
  83,197
  30,548
  192,234
  80,036
  68,862
  26,425
  105,458
  33,100
  172,310
  70,289
  219,118
  85,721
  4,603,658
  1,661,979
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hh_total_cat |  1,002,920           3           0          3          3
  1,002,920
  9,594,647
  298,534
  79,363
  3,837
  1,351,071
  148,413
  435,953
  73,315
  302,824
  89,895
  70,229
  20,286
  224,133
  38,327
  83,197
  5,502
  192,234
  34,761
  68,862
  10,581
  105,458
  8,661
  172,310
  18,246
  219,118
  31,334
  4,603,658
  221,228
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hh_total_cat |    222,517           4           0          4          4
  222,517
  9,594,647
  72,155
  79,363
  1,458
  1,351,071
  39,082
  435,953
  19,316
  302,824
  11,621
  70,229
  2,126
  224,133
  8,421
  83,197
  743
  192,234
  4,704
  68,862
  1,417
  105,458
  7,591
  172,310
  3,620
  219,118
  6,966
  4,603,658
  43,297
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
hh_total_cat |          0
  0
  9,594,647
  0
  79,363
  0
  1,351,071
  0
  435,953
  0
  302,824
  0
  70,229
  0
  224,133
  0
  83,197
  0
  192,234
  0
  68,862
  0
  105,458
  0
  172,310
  0
  219,118
  0
  4,603,658
  0

. file write tablecontent _n 

. 
. tabulatevariable, variable(carehome) min(0) max(1) missing
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    carehome | 17,424,721           0           0          0          0
  17,424,721
  9,594,647
  9,542,613
  79,363
  78,787
  1,351,071
  1,348,173
  435,953
  435,595
  302,824
  302,724
  70,229
  70,215
  224,133
  223,983
  83,197
  82,923
  192,234
  192,043
  68,862
  68,753
  105,458
  105,387
  172,310
  172,077
  219,118
  218,799
  4,603,658
  4,582,649
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    carehome |     78,336           1           0          1          1
  78,336
  9,594,647
  52,034
  79,363
  576
  1,351,071
  2,898
  435,953
  358
  302,824
  100
  70,229
  14
  224,133
  150
  83,197
  274
  192,234
  191
  68,862
  109
  105,458
  71
  172,310
  233
  219,118
  319
  4,603,658
  21,009
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    carehome |          0
  0
  9,594,647
  0
  79,363
  0
  1,351,071
  0
  435,953
  0
  302,824
  0
  70,229
  0
  224,133
  0
  83,197
  0
  192,234
  0
  68,862
  0
  105,458
  0
  172,310
  0
  219,118
  0
  4,603,658
  0

. file write tablecontent _n 

. 
. *tabulatevariable, variable(is_prison) min(0) max(1) missing
. *file write tablecontent _n 
. 
. tabulatevariable, variable(smoke_nomiss) min(1) max(3)  
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
smoke_nomiss |  8,763,428           1           0          1          1
  8,763,428
  9,594,647
  4,288,653
  79,363
  32,981
  1,351,071
  631,426
  435,953
  339,399
  302,824
  211,627
  70,229
  46,522
  224,133
  159,344
  83,197
  44,086
  192,234
  146,926
  68,862
  44,428
  105,458
  83,466
  172,310
  97,498
  219,118
  127,586
  4,603,658
  2,509,486
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
smoke_nomiss |  5,765,354           2           0          2          2
  5,765,354
  9,594,647
  3,682,042
  79,363
  31,750
  1,351,071
  384,351
  435,953
  62,581
  302,824
  47,470
  70,229
  12,392
  224,133
  38,033
  83,197
  22,492
  192,234
  28,040
  68,862
  13,404
  105,458
  12,616
  172,310
  40,278
  219,118
  46,900
  4,603,658
  1,343,005
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
smoke_nomiss |  2,974,275           3           0          3          3
  2,974,275
  9,594,647
  1,623,952
  79,363
  14,632
  1,351,071
  335,294
  435,953
  33,973
  302,824
  43,727
  70,229
  11,315
  224,133
  26,756
  83,197
  16,619
  192,234
  17,268
  68,862
  11,030
  105,458
  9,376
  172,310
  34,534
  219,118
  44,632
  4,603,658
  751,167

. file write tablecontent _n 

. 
. qui summarizevariable, variable(bmi)

. file write tablecontent _n

. 
. tabulatevariable, variable(obese4cat_sa) min(1) max(4) 
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
obese4cat_sa | 13,580,842           1           0          1          1
  13,580,842
  9,594,647
  7,225,548
  79,363
  62,610
  1,351,071
  1,125,488
  435,953
  310,817
  302,824
  190,616
  70,229
  51,319
  224,133
  165,030
  83,197
  59,344
  192,234
  145,593
  68,862
  51,927
  105,458
  101,516
  172,310
  139,374
  219,118
  183,579
  4,603,658
  3,768,081
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
obese4cat_sa |  2,484,648           2           0          2          2
  2,484,648
  9,594,647
  1,491,529
  79,363
  11,321
  1,351,071
  149,012
  435,953
  87,951
  302,824
  70,568
  70,229
  13,706
  224,133
  42,223
  83,197
  14,561
  192,234
  30,228
  68,862
  10,677
  105,458
  3,016
  172,310
  20,900
  219,118
  24,459
  4,603,658
  514,497
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
obese4cat_sa |    958,960           3           0          3          3
  958,960
  9,594,647
  582,124
  79,363
  3,753
  1,351,071
  52,283
  435,953
  26,885
  302,824
  28,745
  70,229
  3,861
  224,133
  12,429
  83,197
  6,021
  192,234
  11,395
  68,862
  4,170
  105,458
  647
  172,310
  7,921
  219,118
  7,822
  4,603,658
  210,904
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
obese4cat_sa |    478,607           4           0          4          4
  478,607
  9,594,647
  295,446
  79,363
  1,679
  1,351,071
  24,288
  435,953
  10,300
  302,824
  12,895
  70,229
  1,343
  224,133
  4,451
  83,197
  3,271
  192,234
  5,018
  68,862
  2,088
  105,458
  279
  172,310
  4,115
  219,118
  3,258
  4,603,658
  110,176

. file write tablecontent _n 

. 
. qui summarizevariable, variable(hba1c_pct)

. file write tablecontent _n

. 
. qui summarizevariable, variable(hba1c_mmol_per_mol)

. file write tablecontent _n

. 
. tabulatevariable, variable(dm_type) min(0) max(3)  
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     dm_type | 15,771,468           0           0          0          0
  15,771,468
  9,594,647
  8,635,325
  79,363
  70,644
  1,351,071
  1,271,960
  435,953
  350,801
  302,824
  245,325
  70,229
  55,575
  224,133
  189,494
  83,197
  64,621
  192,234
  169,835
  68,862
  60,729
  105,458
  100,193
  172,310
  157,580
  219,118
  198,509
  4,603,658
  4,200,877
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     dm_type |     89,610           1           0          1          1
  89,610
  9,594,647
  55,889
  79,363
  352
  1,351,071
  4,660
  435,953
  1,112
  302,824
  872
  70,229
  125
  224,133
  424
  83,197
  422
  192,234
  697
  68,862
  258
  105,458
  83
  172,310
  648
  219,118
  567
  4,603,658
  23,501
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     dm_type |  1,255,062           2           0          2          2
  1,255,062
  9,594,647
  705,331
  79,363
  5,278
  1,351,071
  51,322
  435,953
  59,161
  302,824
  43,767
  70,229
  10,993
  224,133
  22,618
  83,197
  12,573
  192,234
  14,188
  68,862
  5,153
  105,458
  3,436
  172,310
  9,713
  219,118
  12,262
  4,603,658
  299,267
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     dm_type |    386,917           3           0          3          3
  386,917
  9,594,647
  198,102
  79,363
  3,089
  1,351,071
  23,129
  435,953
  24,879
  302,824
  12,860
  70,229
  3,536
  224,133
  11,597
  83,197
  5,581
  192,234
  7,514
  68,862
  2,722
  105,458
  1,746
  172,310
  4,369
  219,118
  7,780
  4,603,658
  80,013

. file write tablecontent _n 

. 
. tabulatevariable, variable(dm_type_exeter_os) min(0) max(2)  
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
dm_type_ex~s | 16,171,777           0           0          0          0
  16,171,777
  9,594,647
  8,838,877
  79,363
  73,809
  1,351,071
  1,296,083
  435,953
  376,436
  302,824
  258,681
  70,229
  59,279
  224,133
  201,441
  83,197
  70,306
  192,234
  177,595
  68,862
  63,539
  105,458
  101,971
  172,310
  162,102
  219,118
  206,554
  4,603,658
  4,285,104
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
dm_type_ex~s |     78,102           1           0          1          1
  78,102
  9,594,647
  49,046
  79,363
  290
  1,351,071
  3,792
  435,953
  931
  302,824
  804
  70,229
  127
  224,133
  346
  83,197
  304
  192,234
  562
  68,862
  202
  105,458
  68
  172,310
  560
  219,118
  468
  4,603,658
  20,602
  17,503,057

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
dm_type_ex~s |  1,253,178           2           0          2          2
  1,253,178
  9,594,647
  706,724
  79,363
  5,264
  1,351,071
  51,196
  435,953
  58,586
  302,824
  43,339
  70,229
  10,823
  224,133
  22,346
  83,197
  12,587
  192,234
  14,077
  68,862
  5,121
  105,458
  3,419
  172,310
  9,648
  219,118
  12,096
  4,603,658
  297,952

. file write tablecontent _n 

. 
. qui summarizevariable, variable(bp_sys) 

. file write tablecontent _n

. 
. qui summarizevariable, variable(bp_dias) 

. file write tablecontent _n

. 
. qui summarizevariable, variable(bp_map) 

. file write tablecontent _n

. 
. file write tablecontent _n _n

. 
. ** COMORBIDITIES (binary)
. qui summarizevariable, variable(comorbidity_count)

. file write tablecontent _n

. 
. foreach comorb of varlist               ///
>         hypertension                            ///
>         chronic_cardiac_disease         ///
>         stroke                                          ///
>         egfr60                                                  ///
>         esrf                                            ///
>         cancer                                          ///
>         ra_sle_psoriasis                        ///
>         immunosuppressed                        ///
>         chronic_liver_disease           ///
>         dementia                                        ///
>         other_neuro                                     ///
>         asthma                                          ///
>         chronic_respiratory_disease ///
>         { 
  2.         local comorb: subinstr local comorb "i." ""
  3.         local lab: variable label `comorb'
  4.         file write tablecontent ("`lab'") _tab
  5.                                                                 
.         generaterow2, variable(`comorb') condition("==1")
  6.         file write tablecontent _n
  7. }
  17,503,057
  3,766,763
  9,594,647
  2,293,661
  79,363
  19,928
  1,351,071
  168,829
  435,953
  85,170
  302,824
  45,707
  70,229
  10,246
  224,133
  33,057
  83,197
  26,429
  192,234
  31,907
  68,862
  11,754
  105,458
  7,306
  172,310
  20,915
  219,118
  24,717
  4,603,658
  987,137
  17,503,057
  1,218,794
  9,594,647
  765,983
  79,363
  7,009
  1,351,071
  49,149
  435,953
  24,922
  302,824
  17,628
  70,229
  3,330
  224,133
  8,241
  83,197
  5,239
  192,234
  4,075
  68,862
  1,890
  105,458
  1,446
  172,310
  4,797
  219,118
  6,799
  4,603,658
  318,286
  17,503,057
  386,076
  9,594,647
  245,232
  79,363
  2,429
  1,351,071
  14,649
  435,953
  5,852
  302,824
  3,918
  70,229
  793
  224,133
  1,998
  83,197
  2,176
  192,234
  1,555
  68,862
  745
  105,458
  491
  172,310
  1,536
  219,118
  1,743
  4,603,658
  102,959
  17,503,057
  1,012,186
  9,594,647
  632,305
  79,363
  5,501
  1,351,071
  33,204
  435,953
  13,638
  302,824
  8,852
  70,229
  1,635
  224,133
  4,070
  83,197
  8,398
  192,234
  4,489
  68,862
  2,308
  105,458
  981
  172,310
  3,839
  219,118
  3,911
  4,603,658
  289,055
  17,503,057
  25,565
  9,594,647
  13,636
  79,363
  112
  1,351,071
  1,022
  435,953
  1,082
  302,824
  801
  70,229
  137
  224,133
  387
  83,197
  331
  192,234
  389
  68,862
  161
  105,458
  83
  172,310
  220
  219,118
  273
  4,603,658
  6,931
  17,503,057
  993,530
  9,594,647
  646,677
  79,363
  5,773
  1,351,071
  42,483
  435,953
  9,485
  302,824
  5,396
  70,229
  903
  224,133
  4,175
  83,197
  4,482
  192,234
  3,200
  68,862
  1,615
  105,458
  1,780
  172,310
  3,755
  219,118
  4,906
  4,603,658
  258,900
  17,503,057
  900,974
  9,594,647
  575,700
  79,363
  5,145
  1,351,071
  42,520
  435,953
  16,732
  302,824
  11,650
  70,229
  2,699
  224,133
  6,458
  83,197
  2,703
  192,234
  2,635
  68,862
  1,622
  105,458
  1,784
  172,310
  5,042
  219,118
  5,784
  4,603,658
  220,500
  17,503,057
  94,141
  9,594,647
  48,288
  79,363
  549
  1,351,071
  6,003
  435,953
  1,984
  302,824
  1,358
  70,229
  206
  224,133
  1,076
  83,197
  1,338
  192,234
  7,361
  68,862
  1,477
  105,458
  240
  172,310
  2,146
  219,118
  1,200
  4,603,658
  20,915
  17,503,057
  106,034
  9,594,647
  62,936
  79,363
  780
  1,351,071
  7,095
  435,953
  2,078
  302,824
  2,053
  70,229
  342
  224,133
  1,239
  83,197
  401
  192,234
  2,117
  68,862
  551
  105,458
  1,184
  172,310
  906
  219,118
  1,278
  4,603,658
  23,074
  17,503,057
  45,090
  9,594,647
  28,709
  79,363
  407
  1,351,071
  1,570
  435,953
  592
  302,824
  380
  70,229
  108
  224,133
  176
  83,197
  403
  192,234
  126
  68,862
  68
  105,458
  47
  172,310
  126
  219,118
  187
  4,603,658
  12,191
  17,503,057
  177,030
  9,594,647
  113,684
  79,363
  878
  1,351,071
  7,215
  435,953
  2,544
  302,824
  2,139
  70,229
  272
  224,133
  925
  83,197
  828
  192,234
  744
  68,862
  428
  105,458
  213
  172,310
  924
  219,118
  988
  4,603,658
  45,248
  17,503,057
  2,695,032
  9,594,647
  1,699,958
  79,363
  10,956
  1,351,071
  103,381
  435,953
  49,451
  302,824
  45,182
  70,229
  9,327
  224,133
  22,544
  83,197
  14,337
  192,234
  14,537
  68,862
  8,776
  105,458
  4,997
  172,310
  26,046
  219,118
  17,670
  4,603,658
  667,870
  17,503,057
  730,689
  9,594,647
  503,437
  79,363
  5,487
  1,351,071
  27,826
  435,953
  7,055
  302,824
  6,574
  70,229
  1,086
  224,133
  2,833
  83,197
  2,374
  192,234
  1,678
  68,862
  997
  105,458
  572
  172,310
  2,313
  219,118
  3,006
  4,603,658
  165,451

. 
. ** OTHER TREATMENT VARIABLES (binary)
. foreach treat of varlist ///
>         combination_bp_meds     ///
>         statin                          ///
>         insulin                         ///
>                                                 {               
  2. 
. local lab: variable label `treat'
  3. file write tablecontent ("`lab'") _tab
  4.         
. generaterow2, variable(`treat') condition("==1")
  5. 
. file write tablecontent _n
  6. }
  17,503,057
  32,157
  9,594,647
  17,074
  79,363
  183
  1,351,071
  2,161
  435,953
  1,254
  302,824
  568
  70,229
  103
  224,133
  402
  83,197
  505
  192,234
  448
  68,862
  175
  105,458
  71
  172,310
  293
  219,118
  383
  4,603,658
  8,537
  17,503,057
  2,948,499
  9,594,647
  1,838,929
  79,363
  16,932
  1,351,071
  118,908
  435,953
  77,209
  302,824
  51,183
  70,229
  12,827
  224,133
  29,843
  83,197
  14,848
  192,234
  13,976
  68,862
  5,751
  105,458
  4,860
  172,310
  12,829
  219,118
  19,325
  4,603,658
  731,079
  17,503,057
  261,047
  9,594,647
  155,805
  79,363
  940
  1,351,071
  11,264
  435,953
  7,718
  302,824
  7,029
  70,229
  1,637
  224,133
  2,826
  83,197
  2,459
  192,234
  2,382
  68,862
  966
  105,458
  390
  172,310
  1,931
  219,118
  1,962
  4,603,658
  63,738

. 
. 
. 
. file close tablecontent

. 
. 
. * Close log file 
. log close
      name:  <unnamed>
       log:  E:\anna\ethnicity-covid-research/output/log/05a_eth_table1_descrip
> tives_eth16.log
  log type:  text
 closed on:   4 Sep 2020, 05:22:36
-------------------------------------------------------------------------------
